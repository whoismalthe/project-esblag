<!doctype html>
<html lang="da">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Project ESBLAG ‚Äî MVP</title>

    <!-- Fonts (classic look) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@700&family=Nunito:wght@400;700;800;900&display=swap" rel="stylesheet">

    <!-- CSS (cache-bust) -->
    <link rel="stylesheet" href="assets/styles.css?v=1.20.0">
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="wrap row header-left">
        <div class="brand" aria-label="Brand">
          <div class="logo" aria-hidden="true">ES</div>
          <div>
            <div class="brand-title">Project ESBLAG</div>
            <div class="small muted">Education Should Be Like A Game ‚Ä¢ V1.20.0</div>
          </div>
        </div>
      </div>
      <div class="wrap row header-right">
        <button id="darkModeToggle" class="ghost pill-btn" type="button" aria-pressed="false">üåô Dark</button>
        <button id="navAchBtn" class="ghost pill-btn" type="button">üèÜ Achievements</button>
        <div id="userBadge" class="pill user-pill" style="display:none" aria-live="polite"></div>
        <button id="logoutBtn" class="ghost pill-btn" style="display:none" type="button">Log ud</button>
      </div>
    </header>

    <main class="wrap" id="main" tabindex="-1">
      <!-- Lokal profil (kun navn + alder) -->
      <section id="auth" aria-labelledby="authTitle">
        <div class="grid">
          <div class="card">
            <h2 id="authTitle" class="h2">Lav en lokal profil</h2>
            <p class="muted">Vi gemmer kun i din browser.</p>
            <form id="authForm" class="auth-form" novalidate>
              <label for="authName">Navn</label>
              <input id="authName" name="name" type="text" placeholder="Fx Malthe" required autocomplete="name" />
              <label for="authAge">Alder</label>
              <input id="authAge" name="age" type="number" min="8" max="99" placeholder="Fx 18" required inputmode="numeric" />
              <div id="authError" class="error" style="display:none; margin-top:8px" role="alert"></div>
              <div class="row" style="margin-top:12px">
                <button type="submit" class="primary pill-btn">Kom ind</button>
                <button id="authReset" type="button" class="secondary pill-btn">Nulstil fejl</button>
              </div>
            </form>
          </div>
          <div class="card">
            <h2 class="h2">Om Project ESBLAG</h2>
            <p>Spil dig til viden, level op, og l√•s achievements op. üöÄ</p>
          </div>
        </div>
      </section>

      <!-- Welcome -->
      <section id="welcome" style="display:none" aria-labelledby="welcomeTitle">
        <div class="grid">
          <div class="card welcome">
            <h1 id="welcomeTitle" class="big-title">Velkommen, <span id="welcomeName">ven</span> üëã</h1>
            <p class="subtitle">V√¶lg en kategori og k√∏r en kort quiz.</p>

            <!-- Pet / Level -->
            <div class="pet">
              <div class="bubble" aria-hidden="true"><span id="petEmoji">üê£</span></div>
              <div class="metrics">
                <div class="level-line">
                  <span class="level-box">Level <span id="levelText">1</span></span>
                  <span id="tierLine" class="tier-line">Egg ‚Äî Starter som et lille √¶g</span>
                </div>
                <div class="xpbar meter" aria-label="XP fremskridt" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><span id="xpFill" style="width:0%"></span></div>
                <div id="xpLabel" class="small muted" aria-live="polite">0 / 50 XP til n√¶ste level</div>
              </div>
            </div>

            <!-- Streak -->
            <div class="metrics" style="margin-top:10px">
              <div class="row">
                <span class="muted">üî• Streak:</span>
                <strong id="streakCountWelcome">0</strong>
                <span class="muted">‚Ä¢ Bonus</span>
                <strong id="streakBonusWelcome">x1.0</strong>
                <span id="streakMaxWelcome" class="pill" style="display:none">MAX</span>
              </div>
              <div class="streakbar meter" aria-label="Streak fremskridt" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><span id="streakFillWelcome" style="width:0%"></span></div>
            </div>

            <div class="row" style="margin-top:14px">
              <button id="startQuizBtn" type="button" class="primary pill-btn">Start quiz</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Categories -->
      <section id="categories" style="display:none" aria-labelledby="catTitle">
        <div class="card">
          <h2 id="catTitle" class="h2">V√¶lg kategori</h2>
          <p class="muted small">Quizzen bruger sp√∏rgsm√•l fra den valgte kategori.</p>
          <div id="catGrid" class="cat-grid" role="list"></div>
          <div class="row" style="margin-top:14px">
            <button class="secondary pill-btn" id="backFromCategories" type="button">Tilbage</button>
          </div>
        </div>
      </section>

      <!-- Quiz -->
      <section id="quiz" style="display:none" aria-labelledby="quizTitle">
        <div class="card quiz">
          <!-- NY TOPBJ√ÜLKE: breadcrumb + streak -->
          <div class="quiz-top">
            <div class="quiz-breadcrumb">
              <span class="kicker" id="quizTitle">Quiz</span>
              ‚Ä¢ <span id="qCatLabel">Blandet</span>
              ‚Ä¢ <span id="qProgress">1 / 10</span>
            </div>
            <div class="quiz-streak">Streak: üî• <span id="streakBadgeQuiz">0</span></div>
          </div>

          <h2 id="qText" class="question">Sp√∏rgsm√•l</h2>
          <div id="qOptions" class="options" role="group" aria-label="Svarmuligheder"></div>
          <div class="row">
            <button id="nextBtn" class="primary pill-btn" type="button" disabled>N√¶ste</button>
            <button id="cancelQuizBtn" class="ghost pill-btn" type="button">Afbryd</button>
          </div>
        </div>
      </section>

      <!-- Result -->
      <section id="result" style="display:none" aria-labelledby="resultTitle">
        <div class="card result-card center">
          <h2 id="resultTitle" class="big-title">Flot klaret! üéØ</h2>
          <p class="subtitle">Du fik <strong id="correctCount">0</strong>/<span id="totalCount">0</span> rigtige.</p>
          <p class="subtitle">Du tjente <strong id="xpEarned">0</strong> XP.</p>

          <!-- Pet / Level Snapshot -->
          <div class="pet center" style="justify-content:center; margin-top:6px">
            <div class="bubble" aria-hidden="true"><span id="petEmojiResult">üê£</span></div>
            <div class="metrics">
              <div class="level-line">
                <span class="level-box">Level <span id="levelTextResult">1</span></span>
                <span id="tierLineResult" class="tier-line">Egg ‚Äî Starter som et lille √¶g</span>
              </div>
              <div class="xpbar meter" aria-label="XP fremskridt" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><span id="xpFillResult" style="width:0%"></span></div>
              <div id="xpLabelResult" class="small muted" aria-live="polite">0 / 50 XP til n√¶ste level</div>
              <div class="metrics" style="margin-top:6px">
                <div class="row center" style="justify-content:flex-start">
                  <span class="muted">Streak:</span>&nbsp;üî•<strong id="streakCountResult">0</strong>
                  <span class="muted">‚Ä¢ Bonus:</span>&nbsp;<strong id="streakBonusResult">x1.0</strong>
                  <span id="streakMaxResult" class="pill" style="display:none">MAX</span>
                </div>
                <div class="streakbar meter" aria-label="Streak fremskridt" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><span id="streakFillResult" style="width:0%"></span></div>
              </div>
            </div>
          </div>

          <!-- Wrong answers -->
          <div id="wrongAnswers" style="margin-top:10px; display:none">
            <h3 class="h3">Hvor gik det galt?</h3>
            <ul id="wrongList" class="wrong-list"></ul>
          </div>

          <div class="row" style="margin-top:12px; justify-content:center">
            <button id="retryBtn" type="button" class="primary pill-btn">Pr√∏v quizzen igen</button>
            <button id="homeBtn" class="secondary pill-btn" type="button">Til velkomst</button>
          </div>
        </div>
      </section>
    </main>

    <!-- Toast -->
    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <!-- Achievement Popup -->
    <div id="achPopup" class="ach-popup" aria-live="polite">
      <div class="badge-ico" aria-hidden="true">üèÜ</div>
      <div>
        <div id="achPopupTitle" class="badge-title">Achievement!</div>
        <div id="achPopupDesc" class="badge-desc small">Du har l√•st en ny ting op</div>
      </div>
    </div>

    <!-- Scripts (cache-bust) -->
    <script src="assets/app.js?v=1.20.0" defer></script>
  </body>
</html>
